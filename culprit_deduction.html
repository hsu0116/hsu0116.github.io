<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>도서를 훔친 범인을 찾아라 - 범인 추리</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Dark background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-image: linear-gradient(to bottom right, #2d3748, #1a202c);
            color: #e2e8f0;
        }
        .puzzle-container {
            background-color: #2d3748;
            border-radius: 1.5rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
            padding: 3rem;
            max-width: 900px; /* Wider for more content */
            width: 100%;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            border: 2px solid #4a5568;
        }
        .story-text {
            font-size: 1.125rem; /* Text-lg */
            line-height: 1.75;
            color: #cbd5e1;
            margin-top: 1.5rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        .log-image {
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
            margin-top: 2.5rem;
            border: 3px solid #6366f1; /* Indigo border for emphasis */
            width: 100%;
            max-width: 500px; /* Max width for the log image */
            height: auto;
            object-fit: contain;
        }
        .suspect-statement-card {
            background-color: #4a5568; /* Darker gray for cards */
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 0.75rem;
            width: 100%; /* Full width on smaller screens */
            max-width: 400px; /* Max width for each statement card */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            text-align: left;
            transition: transform 0.2s ease-in-out;
        }
        .suspect-statement-card:hover {
            transform: translateY(-5px);
        }
        .suspect-statement-name {
            font-size: 1.3rem; /* Text-xl */
            font-weight: 700;
            color: #a0aec0; /* Light blue-gray for names */
            margin-bottom: 0.5rem;
        }
        .statement-text {
            font-size: 1rem;
            color: #e2e8f0;
        }
        .input-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px; /* Gap between input fields */
            margin-top: 20px;
        }
        .input-field {
            width: 100%;
            max-width: 300px; /* Max width for each input field */
            padding: 12px;
            border: 2px solid #6366f1; /* Indigo border */
            border-radius: 8px;
            background-color: #334155; /* Slate-700 background */
            color: #e2e8f0;
            font-size: 1rem;
            text-align: center;
        }
        .input-field::placeholder {
            color: #94a3b8; /* Slate-400 placeholder */
        }
        .input-field:focus {
            outline: none;
            border-color: #818cf8; /* Lighter indigo on focus */
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.4);
        }
        .button-glow {
            transition: all 0.3s ease;
        }
        .button-glow:hover {
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.6); /* Indigo glow */
            transform: translateY(-3px);
        }

        /* Responsive adjustments */
        @media (min-width: 768px) {
            .statement-grid {
                grid-template-columns: repeat(2, 1fr); /* Two columns on larger screens */
            }
        }
        @media (min-width: 1024px) {
            .statement-grid {
                grid-template-columns: repeat(3, 1fr); /* Three columns on even larger screens */
            }
        }
    </style>
</head>
<body>
    <div class="puzzle-container">
        <h1 class="text-4xl md:text-5xl font-extrabold text-gray-100 mb-6 tracking-tight">
            도서관 출입 대장
        </h1>

        <p class="story-text">
            서가에서 얻은 단서에 따라 도서관 입구로 향했습니다.
            입구 옆에는 낡은 출입 대장이 놓여 있었지만,
            아쉽게도 사람 이름이 적힌 부분은 찢어져 있었습니다.
        </p>

        <!-- Attendance Log Image Placeholder -->
        <img src="https://placehold.co/500x300/4CAF50/FFFFFF?text=출입대장+%0A(이름+찢어짐)" alt="찢어진 출입 대장 이미지"
             class="log-image">

        <p class="story-text mt-6">
            하지만 시간 기록은 남아있었고, 맨 처음 9시에 입장한 사람이 범인이라는 것을 알아냈습니다.
            다섯 명의 용의자들은 각자 자신들이 언제 왔는지에 대해 이야기합니다.
        </p>

        <div class="statement-grid grid grid-cols-1 gap-4 mt-8 w-full">
            <div class="suspect-statement-card">
                <p class="suspect-statement-name">박 제비</p>
                <p class="statement-text">"나는 이 사서보다 나중에 왔어. 그리고 내가 도착했을 때, 도서관에는 이미 세 명이 있었어."</p>
            </div>
            <div class="suspect-statement-card">
                <p class="suspect-statement-name">이 사서</p>
                <p class="statement-text">"나는 최 학생보다 먼저 왔지만, 왕 교감보다는 늦게 왔어. 나보다 늦게 온 사람은 딱 두 명이야."</p>
            </div>
            <div class="suspect-statement-card">
                <p class="suspect-statement-name">최 학생</p>
                <p class="statement-text">"나는 박 제비보다 먼저 왔지만, 김 손님보다는 늦게 왔어."</p>
            </div>
            <div class="suspect-statement-card">
                <p class="suspect-statement-name">왕 교감</p>
                <p class="statement-text">"나는 최 학생보다 늦게 왔어. 그리고 이 사서보다도 늦게 왔어."</p>
            </div>
            <div class="suspect-statement-card">
                <p class="suspect-statement-name">김 손님</p>
                <p class="statement-text">"나는 이 사서보다 먼저 왔어. 그리고 박 제비는 나보다 늦게 왔어."</p>
            </div>
        </div>

        <p class="story-text mt-8 font-semibold">
            도서관에 입장한 순서대로 다섯 명의 이름을 입력하세요.<br>(예: 홍길동, 이순신, ... )
        </p>

        <div class="flex flex-col items-center space-y-4 mt-6 w-full max-w-sm">
            <input type="text" id="answerInput1" placeholder="1번째로 온 사람의 이름" class="input-field">
            <input type="text" id="answerInput2" placeholder="2번째로 온 사람의 이름" class="input-field">
            <input type="text" id="answerInput3" placeholder="3번째로 온 사람의 이름" class="input-field">
            <input type="text" id="answerInput4" placeholder="4번째로 온 사람의 이름" class="input-field">
            <input type="text" id="answerInput5" placeholder="5번째로 온 사람의 이름" class="input-field">
            <button id="submitOrderButton"
                    class="button-glow bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition duration-300 ease-in-out transform hover:scale-105">
                순서 제출
            </button>
        </div>

        <p id="feedbackMessage" class="story-text mt-6 font-bold" style="display: none;"></p>
    </div>

    <script>
        const answerInputs = [
            document.getElementById('answerInput1'),
            document.getElementById('answerInput2'),
            document.getElementById('answerInput3'),
            document.getElementById('answerInput4'),
            document.getElementById('answerInput5')
        ];
        const submitOrderButton = document.getElementById('submitOrderButton');
        const feedbackMessage = document.getElementById('feedbackMessage');

        // 정답 순서 (추리 결과): 김 손님, 최 학생, 이 사서, 박 제비, 왕 교감
        const correctOrder = ["김 손님", "최 학생", "이 사서", "박 제비", "왕 교감"];

        submitOrderButton.addEventListener('click', checkOrder);
        answerInputs.forEach(input => {
            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    checkOrder();
                }
            });
        });

        function checkOrder() {
            const userAnswerArray = answerInputs.map(input => input.value.trim()); // 모든 입력값 가져오기
            feedbackMessage.style.display = 'none'; // 새로운 입력 시 피드백 메시지 숨기기

            let isCorrect = true;
            for (let i = 0; i < correctOrder.length; i++) {
                if (userAnswerArray[i] !== correctOrder[i]) {
                    isCorrect = false;
                    break;
                }
            }

            if (isCorrect) {
                feedbackMessage.textContent = "정답입니다! 범인을 찾았습니다!";
                feedbackMessage.style.color = '#10B981'; // Green-500
                feedbackMessage.style.display = 'block';

                // 정답 시 모든 입력 필드와 버튼 비활성화
                answerInputs.forEach(input => input.disabled = true);
                submitOrderButton.disabled = true;

                setTimeout(() => {
                    alert('축하합니다! 범인을 찾았습니다! 이제 탈출하세요!'); // 임시 알림
                    // window.location.href = window.location.origin + '/final_page.html'; // 최종 페이지로 이동
                }, 2000);
            } else {
                feedbackMessage.textContent = "오답입니다! 순서를 다시 꼼꼼히 추리해 보세요.";
                feedbackMessage.style.color = '#EF4444'; // Red-500
                feedbackMessage.style.display = 'block';
                answerInputs.forEach(input => input.value = ''); // 모든 입력 필드 초기화
                answerInputs[0].focus(); // 첫 번째 입력 필드에 포커스
            }
        }

        // 사용자가 입력 필드에 다시 입력하기 시작하면 피드백 메시지 숨기기
        answerInputs.forEach(input => {
            input.addEventListener('input', () => {
                if (feedbackMessage.style.display === 'block' && feedbackMessage.textContent.includes("오답입니다")) {
                    feedbackMessage.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>
