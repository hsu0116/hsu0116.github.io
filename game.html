<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>⚾️ 2인 숫자 야구 - 시작 (로컬 모드)</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'primary': '#2c3e50',
                        'secondary': '#3498db',
                        'accent': '#2ecc71',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4 font-sans">

    <div id="app-container" class="bg-white p-8 rounded-xl shadow-2xl w-full max-w-md space-y-6">
        <h1 class="text-3xl font-bold text-center text-primary">
            ⚾️ 2인 숫자 야구 (로컬 테스트)
        </h1>
        <p class="text-center text-gray-500 mb-6">
            함께 플레이할 이름과 역할을 선택하고 게임을 시작하세요.
        </p>

        <!-- 닉네임 선택 -->
        <div class="space-y-4">
            <div>
                <label for="player-nickname-select" class="block text-sm font-medium text-gray-700 mb-1">내 닉네임</label>
                <select id="player-nickname-select" 
                       class="w-full p-3 border border-gray-300 bg-white rounded-lg focus:ring-secondary focus:border-secondary transition duration-150">
                    <option value="" disabled selected>닉네임을 선택하세요</option>
                    <option value="형쓰">형쓰</option>
                    <option value="홍쓰">홍쓰</option>
                    <option value="알파카">알파카</option>
                    <option value="홍딱지">홍딱지</option>
                </select>
            </div>
             <!-- 역할 선택 (P1 / P2) -->
            <div>
                <label for="player-role-select" class="block text-sm font-medium text-gray-700 mb-1">내 역할 (Player 1/2)</label>
                <select id="player-role-select" 
                       class="w-full p-3 border border-gray-300 bg-white rounded-lg focus:ring-secondary focus:border-secondary transition duration-150">
                    <option value="" disabled selected>역할을 선택하세요</option>
                    <option value="P1">Player 1 (선공)</option>
                    <option value="P2">Player 2 (후공)</option>
                </select>
            </div>
        </div>

        <!-- 상태 메시지 및 버튼 -->
        <div id="status-message" class="text-center text-sm font-semibold text-blue-600">
            <span id="auth-status">닉네임과 역할을 선택해 주세요.</span>
        </div>

        <button id="start-game-btn" disabled
                class="w-full py-3 px-4 bg-secondary text-white font-bold rounded-lg shadow-md hover:bg-blue-700 transition duration-300 disabled:bg-gray-400">
            로컬 게임 시작
        </button>
        
        <p class="text-xs text-center text-gray-400 pt-4">
            로컬 테스트 모드: 데이터는 브라우저에만 저장됩니다.
        </p>
    </div>

    <script type="module">
        
        const authStatusEl = document.getElementById('auth-status');
        const startButton = document.getElementById('start-game-btn');
        const nicknameSelect = document.getElementById('player-nickname-select');
        const roleSelect = document.getElementById('player-role-select');

        // 헬퍼 함수: 버튼 활성화/비활성화
        function checkInputs() {
            const nickname = nicknameSelect.value;
            const role = roleSelect.value;
            startButton.disabled = !(nickname && role);
        }

        // 1. 로컬 게임 시작 처리
        function handleGameStart() {
            const nickname = nicknameSelect.value;
            const myRole = roleSelect.value;

            if (!nickname || !myRole) {
                authStatusEl.textContent = "오류: 닉네임과 역할을 모두 선택해 주세요.";
                return;
            }

            // 로컬 스토리지에 데이터 저장
            localStorage.setItem('playerNickname', nickname);
            localStorage.setItem('myRole', myRole); // P1 또는 P2 역할 저장
            localStorage.setItem('gameId', 'LOCAL_DUO_GAME'); // 고정된 로컬 게임 ID

            authStatusEl.textContent = `${nickname}님 (${myRole})으로 게임 시작!`;

            // 실제 게임 화면으로 이동
            window.location.href = 'game.html'; 
        }

        // 이벤트 리스너 연결
        nicknameSelect.addEventListener('change', checkInputs);
        roleSelect.addEventListener('change', checkInputs);
        startButton.addEventListener('click', handleGameStart);

        // 초기 상태 확인
        checkInputs();

    </script>
</body>
</html>
